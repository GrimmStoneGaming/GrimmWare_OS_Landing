<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
  <title>GrimmWare OS Gateway</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="stylesheet" href="LP-style.css" />
</head>
<body>
  <div id="preload-overlay"></div>
  <div id="smash-overlay"></div>

  <!-- LANDING PAGE (LP) CONTENT - INITIALLY HIDDEN -->
  <div id="landing-page" style="display: none; opacity: 0;">
    <header>
      <div class="top-container">
        <img src="images/grimmware-logo.png" alt="GWOS Logo" class="logo-main" />
        <img src="images/emotion-is-executable.png" alt="Emotion Is Executable" class="tagline" />
      </div>
    </header>
    <main>
      <section class="featured-track">
        <h2>Featured Track: Pre-Release</h2>
        <div class="yt-wrapper">
          <iframe id="featured-yt-player" width="100%" height="315" src="https://www.youtube.com/embed/TNyoVtTO33M?enablejsapi=1" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>
        </div>
      </section>
      <section class="description-block">
        <h3>Welcome to GrimmWare OS</h3>
        <p>This is the cutting edge of emotion-based tech. Dig into the tracks, explore the shadows, and decrypt what's hidden.</p>
      </section>
    </main>
  </div>

  <!-- GATEWAY UI -->
  <div id="gateway-ui">
    <div class="top-container" id="top-container">
      <div class="logo-container">
        <img class="logo-main" src="images/grimmware-logo.png" alt="GRIMMWARE OS Logo" loading="lazy"/>
        <img class="tagline" src="images/emotion-is-executable.png" alt="Emotion is Executable" loading="lazy"/>
      </div>

      <div class="decrypt-wrapper hidden" role="region" aria-label="Decryption Puzzle">
        <div class="decrypt-boxes" id="decrypt-boxes">
          <div class="box" id="box0" role="button" tabindex="0" aria-label="Box 1">G</div>
          <div class="box" id="box1" role="button" tabindex="0" aria-label="Box 2">W</div>
          <div class="box" id="box2" role="button" tabindex="0" aria-label="Box 3">O</div>
          <div class="box" id="box3" role="button" tabindex="0" aria-label="Box 4">S</div>
          <div class="separator" aria-hidden="true">_</div>
          <div class="box" id="box4" role="button" tabindex="0" aria-label="Box 5">E</div>
          <div class="box" id="box5" role="button" tabindex="0" aria-label="Box 6">X</div>
          <div class="box" id="box6" role="button" tabindex="0" aria-label="Box 7">E</div>
        </div>
      </div>

      <div class="decrypt-instruction" id="decrypt-instruction"></div>
    </div>

    <div style="height: 250px; width: 100%;"></div>

    <!-- ACCESS MESSAGE -->
    <div id="access-container">
      <div id="access-message" class="hidden" aria-live="polite">
        <span class="granted"></span>
        <span class="warning" id="warning-line"></span>
      </div>

      <div id="run-wrapper" class="run-button-wrapper hidden">
        <button id="run-button" aria-label="Execute Gateway Unlock">&gt;&gt;&gt; RUN IT</button>
      </div>
    </div>

    <!-- INIT SCREEN (Pre-Gateway Trigger) -->
    <div id="init-screen">
      <button id="init-button">&gt;&gt;&gt; INITIATE &lt;&lt;&lt;</button>
    </div>

    <div id="gateway-overlay" aria-hidden="true"></div>

    <!-- TERMINAL WINDOW -->
    <div id="terminal-overlay" class="hidden">
      <div id="terminal-lines" class="terminal-inner"></div>
    </div>
  </div>

  <div class="grimm-footer">
    Built by GrimmStone & Gizmo ðŸ–¤ Emotion is Executable
  </div>

  <audio id="insiderTrack" src="sounds/Dyfyushun.mp3" preload="auto" loop></audio>

  <script>
    var player;
    function onYouTubeIframeAPIReady() {
      player = new YT.Player('featured-yt-player', {
        events: {
          'onStateChange': onPlayerStateChange
        }
      });
    }

    function onPlayerStateChange(event) {
      const insiderTrack = document.getElementById('insiderTrack');
      if (!insiderTrack) return;
      switch (event.data) {
        case YT.PlayerState.PLAYING:
          insiderTrack.pause();
          break;
        case YT.PlayerState.PAUSED:
        case YT.PlayerState.ENDED:
          insiderTrack.play();
          break;
      }
    }
  </script>

  <script src="script.js"></script>
  <script src="LP-script.js"></script>
  <script src="https://www.youtube.com/iframe_api"></script>
</body>
</html>
